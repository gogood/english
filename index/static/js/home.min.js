function init(){var a=0;$("#tp").on("click",function(a){$(/webkit/.test(navigator.userAgent.toLowerCase())?"body":"html").animate({scrollTop:0},"slow")});$("#gw").on("mouseover",function(){$("#ewm").fadeIn(300)});$("#gw").on("mouseout",function(){$("#ewm").fadeOut(300)});$(window).scroll(function(){a=$(this).scrollTop();var b=$("#footer .mfooter")[0].offsetTop;if(100<a&&a<b-$(window).height()){200<a&&!$(".session1 .video").hasClass("session1-animation")&&$(".session1 .video").addClass("session1-animation");
1030<a&&!$(".session2 .video .vhand").hasClass("session2-animation")&&$(".session2 .video .vhand").addClass("session2-animation");1030<a&&!$(".session2 .video .video-paid").hasClass("session2-animation-2")&&($(".session2 .video .video-paid").addClass("session2-animation-2"),$(".session2 .video .video-box").addClass("session2-animation-2"));$(".aside").fadeIn(300);if($("#footer .apply").hasClass("fixed"))return!1;$("#footer .apply").addClass("fixed");$("#footer").css("paddingTop","60px")}else if(100>
a&&$(".aside").fadeOut(300),$("#footer").css("paddingTop","0px"),$("#footer .apply").hasClass("fixed"))$("#footer .apply").removeClass("fixed");else return!1})}init();$(".showLogin").on("click",function(){showSignIn()});$("#login-area").on("click","a",function(){$(this).hasClass("ld-btn-signin")?showSignIn():showSignOut()});$("#sign .modal-header ul").on("click","a",function(){if($(this).hasClass("active"))return!1;$(this).hasClass("sign-btn-in")?showSignIn():$(this).hasClass("sign-btn-up")&&showSignOut()});
$("#rememberPass").on("click",function(){radioToggle()});$("#remeberRadio").on("click",function(){radioToggle()});$("#forgetPass").on("click",function(){showForget()});$("#backSign").on("click",function(){showSignIn()});
$(".modal-dialog .close,.modal-video").on("click",function(a){a=a||window.event;if("video4"==$(a.target)[0].id)return!1;$("#sign").hasClass("in")?($("#sign input").val(""),$(".dialog").fadeOut()):$("#modal-video").hasClass("in")&&($("#modal-video").modal("hide"),$("#video4").get(0).pause(),$("#video4").get(0).currentTime=0)});$("#sign").on("focus","input",function(){"radio"!==$(this).attr("type")&&$("#sign .dialog").fadeOut(100)});$("#login").on("click",login);$("#register").on("click",register);
$("#changePass").on("click",forget);$("#apply-btn").on("click",apply);$("#childName").on("blur",setUpCase);$("body").on("keyup","form",function(a){a=a||window.event;var b=$(this).attr("id");if(13==a.keyCode)switch(b){case "sign-in-form":login();break;case "sign-up-form":register();break;case "apply-form":apply();break;case "forget-form":forget()}});
function login(){var a=$("#loginPhone").val(),b=$("#loginPass").val(),c={};c.login_name=a;c.password=b;c.verify=$("#loginYZ").val();"checked"==$("#remeberRadio").attr("checked")&&(c.auto_login="true");var d=$(".sign-in-form").eq(0).attr("action");if(judgePhone(a)&&judgePassword(b))return $.ajax({url:d,type:"POST",data:c,success:function(a){if(a.status)return $(".sign-in-form .sign-verify").removeClass("hide"),window.location=a.url,!1;if(a.show_verify){var b=(new Date).valueOf();$(".sign-verify").removeClass("hidden");
$("#yzImg").attr("src",YZIMGURL+b)}$("#login-dialog").text(a.info);$("#login-dialog").fadeIn(100)}}),!1;judgePhone(a)?$("#login-dialog").text("\u5bc6\u7801\u9519\u8bef"):$("#login-dialog").text("\u624b\u673a\u53f7\u7801\u9519\u8bef");$("#login-dialog").fadeIn(100)}
function register(){var a=$("#regPhone").val(),b=$("#regYZ").val(),c=$("#regPass").val(),d=$("#regPass2").val(),e=$("#referralCode").val(),e={mobile:a,verify:b,password:c,"password-again":d,tjm:e};judgePhone(a)?judgePassword(c)?c!==d?$("#reg-dialog").text("\u5bc6\u7801\u4e0d\u4e00\u81f4"):6!==b.length?$("#reg-dialog").text("\u9a8c\u8bc1\u7801\u9519\u8bef"):($("#reg-dialog").text("\u6b63\u5728\u63d0\u4ea4\u4fe1\u606f\uff0c\u8bf7\u7a0d\u7b49..."),$.ajax({url:REGURL,data:e,type:"POST",success:function(a){a.status?
($(".forget-form input").val(""),window.location=SUCCURL):$("#reg-dialog").text(a.info)}})):$("#reg-dialog").text("\u5bc6\u7801\u9519\u8bef"):$("#reg-dialog").text("\u624b\u673a\u53f7\u7801\u9519\u8bef");$("#reg-dialog").fadeIn(100)}
function forget(){var a=$("#yPhone").val(),b=$("#yYZ").val(),c=$("#newPass").val(),d=$("#newPass2").val(),e={mobile:a,verify:b,password:c,"password-again":d};judgePhone(a)?judgePassword(c)?c!==d?$("#change-dialog").text("\u5bc6\u7801\u4e0d\u4e00\u81f4"):6!==b.length?$("#change-dialog").text("\u9a8c\u8bc1\u7801\u9519\u8bef"):$.ajax({url:CHANGEREGURL,data:e,type:"POST",success:function(a){a.status&&$(".forget-form input").val("");$("#change-dialog").text(a.info)}}):$("#change-dialog").text("\u5bc6\u7801\u9519\u8bef"):
$("#change-dialog").text("\u624b\u673a\u53f7\u7801\u9519\u8bef");$("#change-dialog").fadeIn(100)}
function apply(){var a=$("#childName").val(),b=$("#parentPhone").val(),c=$("#applyPass").val();$(".apply-alert").eq(0);var d=$("#tjm").val(),d={cn_name:a,mobile:b,password:c,tjm:d};$(".apply-alert").remove();a?judgePhone(b)?judgePassword(c)?$.ajax({url:REGURL,type:"POST",data:d,success:function(a){a.status?window.location=SUCCURL:(a='<div class="alert apply-alert alert-warning">'+a.info+"</div>",$("#parentPhone").after(a),setTimeout(function(){$(".apply-alert").fadeOut(300)},1E3))}}):(a='<div class="alert apply-alert alert-warning">\u5bc6\u7801\u9519\u8bef</div>',
$("#applyPass").after(a),setTimeout(function(){$(".apply-alert").fadeOut(300)},1E3)):(a='<div class="alert apply-alert alert-warning">\u624b\u673a\u53f7\u7801\u9519\u8bef</div>',$("#parentPhone").after(a),setTimeout(function(){$(".apply-alert").fadeOut(300)},1E3)):(a='<div class="alert apply-alert alert-warning">\u8bf7\u586b\u5199\u5b69\u5b50\u7684\u59d3\u540d</div>',$("#childName").after(a),setTimeout(function(){$(".apply-alert").fadeOut(300)},1E3))}
function setUpCase(a){a=a||window.event;a=a.target;var b=$(a).val();$(a).val(UpperFirstLetter(b))}function UpperFirstLetter(a){var b=a.slice(0,1),b=b.toUpperCase();return a=b+a.slice(1)}
$(".getYZ").on("click",function(){function a(){var a=parseInt($(f).text());1<a?(a--,$(f).text(a+"\u79d2\u540e\u91cd\u65b0\u83b7\u53d6")):(clearInterval(d),$(f).removeClass("disabled"),$(f).text("\u83b7\u53d6\u9a8c\u8bc1\u7801"))}var b,c,d,e,f=this;if("getYZ"==$(this).attr("id"))b=$("#regPhone").val(),c=$("#reg-dialog"),e=YZMURL;else if("getYZ2"==$(this).attr("id"))b=$("#yPhone").val(),c=$("#change-dialog"),e=YZMURLFORGET;else return!1;if($(this).hasClass("disabled"))return!1;judgePhone(b)?$.ajax({url:e,
data:{mobile:b},type:"POST",success:function(b){b.status&&($(f).addClass("disabled"),$(f).text("59\u79d2\u540e\u91cd\u65b0\u83b7\u53d6"),d=setInterval(a,1E3));$(c).text(b.info)}}):c.text("\u624b\u673a\u53f7\u7801\u9519\u8bef");c.fadeIn(100)});$("#yzImg").on("click",function(){var a=(new Date).valueOf();$(this).attr("src",YZIMGURL+a)});
function showSignIn(){$("#sign .modal-header .sign-btn").removeClass("active").removeClass("hide");$("#sign form").removeClass("active");$("#sign .sign-btn-in").addClass("active");$("#sign .sign-in-form").addClass("active");$("#sign .modal-header .sign-btn-forget").addClass("hide");$("#sign input").val("");$(".dialog").fadeOut()}
function showSignOut(){$("#sign .modal-header .sign-btn").removeClass("active");$("#sign form").removeClass("active");$("#sign .sign-btn-up").addClass("active");$("#sign .sign-up-form").addClass("active");$("#sign input").val("");$(".dialog").fadeOut();code&&$("#referralCode").val(code)}
function showForget(){$("#sign .modal-header ul a").addClass("hide");$("#sign .modal-header .sign-btn-forget").removeClass("hide").addClass("active");$("#sign .modal-body form").removeClass("active");$("#sign .modal-body .forget-form").addClass("active")}function radioToggle(){$("#remeberRadio").attr("checked")?$("#remeberRadio").attr("checked",!1):($("#remeberRadio").prop("checked",!0),$("#remeberRadio").attr("checked",!0))}function judgePhone(a){return/^1[34578]\d{9}$/.test(a)?!0:!1}
function judgePassword(a){return 6<=a.length&&20>=a.length?!0:!1}$("#play-video3,#play-video2").on("click",function(){var a=$(this).attr("fileurl");$("#video4").attr("src",a);$("#video4").attr("poster",$(this).attr("data-url"));$("#video4").get(0).play()});